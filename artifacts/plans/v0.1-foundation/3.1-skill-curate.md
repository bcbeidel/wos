---
document_type: plan
description: "Build the curate skill for creating and updating documents across all four types with free-text intent classification"
last_updated: 2026-02-17
status: draft
related:
  - artifacts/plans/v0.1-foundation/1.1-document-type-models.md
  - artifacts/plans/v0.1-foundation/1.2-discovery-layer.md
  - artifacts/plans/v0.1-foundation/2.1-skill-setup.md
  - artifacts/research/v0.1-foundation/2026-02-17-skills-architecture-design.md
---

# Build Curate Skill

## Objective

An `/wos:curate` skill exists that handles content lifecycle operations:
creating documents of any type (including from URLs) and updating existing
documents. The skill uses free-text intent classification — users describe what
they want and Claude routes to the correct workflow. When intent is ambiguous,
Claude asks the user to clarify. Document type dispatch happens via the Pydantic
models and dispatch tables, not type-specific branching.

## Context

- Skills architecture: `artifacts/research/v0.1-foundation/2026-02-17-skills-architecture-design.md` §3.2
- Depends on document type models (templates, frontmatter validation)
- Depends on discovery layer (manifest regeneration after content changes)
- Depends on setup (project must have `/context/` directory)
- Routing via SKILL.md triggers + fallback ask when ambiguous
- Free-text examples: "investigate X" → research, "plan how to Y" → plan,
  "add topic about Z" → topic, "update overview" → overview update

## Steps

1. Research existing implementations: search for well-starred content
   management tools, document generators, and Claude Code plugins with
   free-text intake patterns. Look at how other tools handle template
   rendering, intent classification, and content lifecycle. Document
   findings and adapt patterns.

2. Create `skills/curate/SKILL.md` with skill description, broad
   conversational triggers ("add", "create", "research", "plan",
   "update", "save this"), and routing logic:
   - No `/context/` directory → redirect to `/wos:setup`
   - Classify intent → route to workflow
   - If ambiguous, ask user which document type they mean

3. Create `skills/curate/workflows/curate-add.md`:
   - Determine document type from user intent
   - For context types (topic, overview): resolve target area, verify it exists
   - For artifact types (research, plan): ask user to confirm filename
     (propose date-prefixed slug from title)
   - If user provides a URL: fetch content, evaluate source quality, use as
     input for the document
   - Research sources (for topic/research types): gather candidates,
     evaluate using source hierarchy
   - Draft content using type-specific template from dispatch tables
   - Use inline markdown links for citations in topic documents
   - Validate via `parse_document()` before writing
   - Run discovery to update manifest (if context type)
   - Present draft for user review

4. Create `skills/curate/workflows/curate-update.md`:
   - Read existing document via `parse_document()`
   - Apply updates (preserve existing frontmatter, update `last_updated`)
   - Re-validate via `parse_document()` before writing
   - Update manifest if description changed (context types only)

5. Implement `wos/templates.py`:
   - One render function per document type: `render_topic()`,
     `render_overview()`, `render_research()`, `render_plan()`
   - `TEMPLATES` dispatch table keyed by `DocumentType`
   - Each function generates valid markdown with correct frontmatter and
     section headings from `SECTIONS` table
   - Output passes `parse_document()` validation

6. Write tests in `tests/test_templates.py`: templates produce valid
   documents for each type, `parse_document(render_topic(...))` round-trips
   successfully

## Verification

- "I want to investigate X" routes to research document creation
- "Add a topic about Y" routes to topic creation in correct area
- "Let's plan how to Z" routes to plan creation in `/artifacts/plans/`
- Ambiguous intent ("save this") triggers clarification question
- Created documents pass `parse_document()` validation
- CLAUDE.md manifest updates after topic creation
- Manifest does NOT update after research/plan creation (artifacts not in manifest)
- Templates for all 4 types produce valid output
- `python3 -m pytest tests/test_templates.py -v` passes
